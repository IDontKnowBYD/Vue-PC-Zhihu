{"version":3,"sources":["webpack:///./src/libs/util.js","webpack:///src/components/item.vue","webpack:///./src/components/item.vue?9cb6","webpack:///./src/components/item.vue","webpack:///./src/directives/time.js","webpack:///src/components/daily-article.vue","webpack:///./src/components/daily-article.vue?53f6","webpack:///src/App.vue","webpack:///./src/components/daily-article.vue","webpack:///./src/App.vue?80de","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["Util","imgPath","apiPath","ajax","axios_default","a","create","baseURL","interceptors","response","use","res","data","getTodayTime","date","Date","setHours","setMinutes","setSeconds","setMilliseconds","getTime","prevDay","timestamp","arguments","length","undefined","getFullYear","toString","getMonth","getDate","util","item","Object","components_item","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","src","images","_e","_v","class","noImg","_s","title","staticRenderFns","src_components_item","__webpack_require__","normalizeComponent","Time","getUnix","getTodayUnix","getYearUnix","setMonth","setDate","getLastDate","time","month","day","getFormatTime","now","today","timer","Math","floor","ceil","daily_article","bind","el","binding","innerHTML","value","__timeout__","setInterval","unbind","clearInterval","Number","_this","getComments","_this2","avatar","comment","getArticle","components_daily_article","domProps","body","directives","name","rawName","comments","expression","_l","author","content","App","Item","dailyArticle","daily_article_normalizeComponent","id","getRecommendList","_this3","others","_this4","getThemes","list","selectortype_template_index_0_src_App","on","type","click","handleToRecommend","$event","showThemes","themeId","handleToTheme","ref","formatDay","key","nativeOn","handleClick","articleId","src_App","App_normalizeComponent","vue_esm","config","productionTip","template","components"],"mappings":"+JAEMA,GACJC,QAAS,6BACTC,QAAS,0BAGXF,EAAKG,KAAOC,EAAAC,EAAMC,QAChBC,QAASP,EAAKE,UAGhBF,EAAKG,KAAKK,aAAaC,SAASC,IAAI,SAAAC,GAClC,OAAOA,EAAIC,OAIbZ,EAAKa,aAAe,WAClB,IAAMC,EAAO,IAAIC,KAKjB,OAJAD,EAAKE,SAAS,GACdF,EAAKG,WAAW,GAChBH,EAAKI,WAAW,GAChBJ,EAAKK,gBAAgB,GACdL,EAAKM,WAIdpB,EAAKqB,QAAU,WAA8C,IAApCC,EAAoCC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAAvB,IAAIR,MAAQK,UAC1CN,EAAO,IAAIC,KAAKO,GAQtB,OAPaR,EAAKY,cAAcC,YACjBb,EAAKc,WAAa,EAAI,GACjC,KAAOd,EAAKc,WAAa,GACzBd,EAAKc,WAAa,GAAGD,YACZb,EAAKe,UAAY,GAC1B,IAAMf,EAAKe,UACXf,EAAKe,WAAWF,YAItB,IAAAG,EAAA,EC5BAC,qBAMAC,0CAIA/B,WCjBAgC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,KAAeE,YAAA,eAAyBN,EAAAvB,KAAA,OAAA2B,EAAA,OAA8BE,YAAA,cAAwBF,EAAA,OAAYG,OAAOC,IAAAR,EAAAlC,QAAAkC,EAAAvB,KAAAgC,OAAA,QAAwCT,EAAAU,KAAAV,EAAAW,GAAA,KAAAP,EAAA,OAAmCE,YAAA,cAAAM,OAAiCC,OAAAb,EAAAvB,KAAAgC,UAA0BT,EAAAW,GAAAX,EAAAc,GAAAd,EAAAvB,KAAAsC,aAE/TC,oBCqBjBC,EAvBAC,EAAA,OAcAC,CACAvB,EACAE,GATA,EAEA,KAEA,KAEA,MAUA,QCvBIsB,GAEFC,QAAS,WAEP,OADW,IAAIzC,MACHK,WAGdqC,aAAc,WACZ,IAAI3C,EAAO,IAAIC,KAKf,OAJAD,EAAKE,SAAS,GACdF,EAAKG,WAAW,GAChBH,EAAKI,WAAW,GAChBJ,EAAKK,gBAAgB,GACdL,EAAKM,WAGdsC,YAAa,WACX,IAAI5C,EAAO,IAAIC,KAOf,OANAD,EAAK6C,SAAS,GACd7C,EAAK8C,QAAQ,GACb9C,EAAKE,SAAS,GACdF,EAAKG,WAAW,GAChBH,EAAKI,WAAW,GAChBJ,EAAKK,gBAAgB,GACdL,EAAKM,WAGdyC,YAAa,SAAUC,GACrB,IAAIhD,EAAO,IAAIC,KAAK+C,GAChBC,EAAQjD,EAAKc,WAAa,EAAI,GAAK,KAAOd,EAAKc,WAAa,GAAKd,EAAKc,WAAa,EACnFoC,EAAMlD,EAAKe,UAAY,GAAK,IAAMf,EAAKe,UAAYf,EAAKe,UAC5D,OAAOf,EAAKY,cAAgB,IAAMqC,EAAQ,IAAMC,GAGlDC,cAAe,SAAU3C,GACvB,IAAI4C,EAAM9B,KAAKoB,UACXW,EAAQ/B,KAAKqB,eACbW,GAASF,EAAM5C,GAAa,IAgBhC,OAbI8C,GAAS,EACL,KACGC,KAAKC,MAAMF,EAAQ,KAAO,EAC7B,KACGA,EAAQ,KACXC,KAAKC,MAAMF,EAAQ,IAAM,MACtBA,GAAS,MAAS9C,EAAY6C,GAAS,EAC1CE,KAAKC,MAAMF,EAAQ,MAAQ,MACxBA,EAAQ,OAAS,GACpBC,KAAKE,KAAKH,EAAQ,OAAS,KAE3BhC,KAAKyB,YAAYvC,KC7B7BkD,eAEAjB,MDkCEkB,KAAM,SAAUC,EAAIC,GAClBD,EAAGE,UAAYrB,EAAKU,cAA8B,IAAhBU,EAAQE,OAC1CH,EAAGI,YAAcC,YAAY,WAC3BL,EAAGE,UAAYrB,EAAKU,cAA8B,IAAhBU,EAAQE,QACzC,MAELG,OAAQ,SAAUN,GAChBO,cAAcP,EAAGI,oBACVJ,EAAGI,+BCvCdI,eAGA,gFAQA,IAAAC,EAAA/C,uGAEA,8DACA,gBACAzB,oBACA,KACAyE,wCAGA,IAAAC,EAAAjD,wJAKAkD,OACAC,sCAOAC,gBCzDAC,GADiBvD,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA4BF,EAAA,OAAYE,YAAA,wBAAkCN,EAAAW,GAAAX,EAAAc,GAAAd,EAAAvB,KAAAsC,UAAAf,EAAAW,GAAA,KAAAP,EAAA,OAAyDE,YAAA,wBAAAiD,UAA8Cd,UAAAzC,EAAAc,GAAAd,EAAAvB,KAAA+E,SAAmCxD,EAAAW,GAAA,KAAAP,EAAA,OAAwBqD,aAAaC,KAAA,OAAAC,QAAA,SAAAjB,MAAA1C,EAAA4D,SAAA,OAAAC,WAAA,oBAAsFvD,YAAA,mBAA+BF,EAAA,QAAAJ,EAAAW,GAAA,MAAAX,EAAAc,GAAAd,EAAA4D,SAAAvE,QAAA,OAAAW,EAAAW,GAAA,KAAAX,EAAA8D,GAAA9D,EAAA,kBAAAoD,GAAiH,OAAAhD,EAAA,OAAiBE,YAAA,kBAA4BF,EAAA,OAAYE,YAAA,yBAAmCF,EAAA,OAAYG,OAAOC,IAAA4C,EAAAD,YAAsBnD,EAAAW,GAAA,KAAAP,EAAA,OAA0BE,YAAA,0BAAoCF,EAAA,OAAYE,YAAA,uBAAiCN,EAAAW,GAAAX,EAAAc,GAAAsC,EAAAW,WAAA/D,EAAAW,GAAA,KAAAP,EAAA,OAAyDqD,aAAaC,KAAA,OAAAC,QAAA,SAAAjB,MAAAU,EAAA,KAAAS,WAAA,iBAA4EvD,YAAA,uBAAmCN,EAAAW,GAAA,KAAAP,EAAA,OAAwBE,YAAA,uBAAiCN,EAAAW,GAAAX,EAAAc,GAAAsC,EAAAY,mBAAwC,MAE9jChD,oBC2BjBiD,eAGAC,KAAAjD,EAEAkD,aClCAjD,EAAA,OAcAkD,CACA/B,EACAiB,GATA,EAEA,KAEA,KAEA,MAUA,sDDeA,OACA,yCAEA5E,0BACA,kBAEA,YAEA,oDAIA2F,0CAGA,gBACA,4CACA,uCACA,YACAxC,EAAA,6CAGA,mDAEAnD,oBACA4F,gDAEA,IAAAtB,EAAA/C,qBACA,iCACA,0EAEAzB,gBACA,+BAGA,IAAA0E,EAAAjD,eACA,qBACAoE,kGAGA,qCAGA,IAAAE,EAAAtE,sDAEAuE,8BAIA,IAAAC,EAAAxE,UACAyE,iBAEAJ,oCACAK,iJAIA,QACAL,wBE7FAM,GADiB7E,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,eAAyBF,EAAA,OAAYE,YAAA,kBAAAM,OAAqCiE,GAAA,cAAA7E,EAAA8E,MAA+BD,IAAKE,MAAA/E,EAAAgF,qBAA+BhF,EAAAW,GAAA,UAAAX,EAAAW,GAAA,KAAAP,EAAA,OAAyCE,YAAA,kBAAAM,OAAqCiE,GAAA,UAAA7E,EAAA8E,MAA2BD,IAAKE,MAAA,SAAAE,GAAyBjF,EAAAkF,YAAAlF,EAAAkF,eAAmClF,EAAAW,GAAA,UAAAX,EAAAW,GAAA,KAAAP,EAAA,MAAwCqD,aAAaC,KAAA,OAAAC,QAAA,SAAAjB,MAAA1C,EAAA,WAAA6D,WAAA,gBAA8E7D,EAAA8D,GAAA9D,EAAA,gBAAAJ,GAAoC,OAAAQ,EAAA,MAAAA,EAAA,KAAwBQ,OAAOiE,GAAAjF,EAAAyE,KAAArE,EAAAmF,SAAA,UAAAnF,EAAA8E,MAAsDD,IAAKE,MAAA,SAAAE,GAAyBjF,EAAAoF,cAAAxF,EAAAyE,QAA6BrE,EAAAW,GAAAX,EAAAc,GAAAlB,EAAA8D,gBAAgC1D,EAAAW,GAAA,KAAAP,EAAA,OAA2BiF,IAAA,OAAA/E,YAAA,eAAoC,cAAAN,EAAA8E,KAAA9E,EAAA8D,GAAA9D,EAAA,uBAAA2E,GAAuE,OAAAvE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,eAAyBN,EAAAW,GAAAX,EAAAc,GAAAd,EAAAsF,UAAAX,EAAAhG,UAAAqB,EAAAW,GAAA,KAAAX,EAAA8D,GAAAa,EAAA,iBAAA/E,GAA8F,OAAAQ,EAAA,QAAkBmF,IAAA3F,EAAAyE,GAAA9D,OAAmB9B,KAAAmB,GAAY4F,UAAWT,MAAA,SAAAE,GAAyBjF,EAAAyF,YAAA7F,EAAAyE,WAA6B,KAAMrE,EAAAU,KAAAV,EAAAW,GAAA,eAAAX,EAAA8E,KAAA9E,EAAA8D,GAAA9D,EAAA,cAAAJ,GAA+E,OAAAQ,EAAA,QAAkBmF,IAAA3F,EAAAyE,GAAA9D,OAAmB9B,KAAAmB,GAAY4F,UAAWT,MAAA,SAAAE,GAAyBjF,EAAAyF,YAAA7F,EAAAyE,UAA6BrE,EAAAU,MAAA,GAAAV,EAAAW,GAAA,KAAAP,EAAA,iBAA+CG,OAAO8D,GAAArE,EAAA0F,cAAoB,IAEl6C1E,oBCqBjB2E,EAvBAzE,EAAA,OAcA0E,CACA3B,EACAW,GATA,EAEA,KAEA,KAEA,MAUA,kBCjBAiB,EAAA,EAAIC,OAAOC,eAAgB,EAG3B,IAAIF,EAAA,GACFtD,GAAI,OACJyD,SAAU,SACVC,YAAchC,IAAA0B","file":"static/js/app.a1b83878c22e9bae6c11.js","sourcesContent":["import axios from 'axios'\n\nconst Util = {\n  imgPath: 'http://127.0.0.1:8013/img/',\n  apiPath: 'http://127.0.0.1:8012/'\n}\n\nUtil.ajax = axios.create({\n  baseURL: Util.apiPath\n})\n\nUtil.ajax.interceptors.response.use(res => {\n  return res.data\n})\n\n// 获取今天时间戳\nUtil.getTodayTime = function () {\n  const date = new Date()\n  date.setHours(0)\n  date.setMinutes(0)\n  date.setSeconds(0)\n  date.setMilliseconds(0)\n  return date.getTime()\n}\n\n// 获取上一天日期\nUtil.prevDay = function (timestamp = (new Date()).getTime()) {\n  const date = new Date(timestamp)\n  const year = date.getFullYear().toString()\n  const month = (date.getMonth() + 1 < 10\n    ? '0' + (date.getMonth() + 1)\n    : date.getMonth() + 1).toString()\n  const day = (date.getDate() < 10\n    ? '0' + date.getDate()\n    : date.getDate()).toString()\n  return year + month + day\n}\n\nexport default Util\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs/util.js","<template>\n  <a class=\"daily-item\">\n    <div class=\"daily-img\" v-if=\"data.images\">\n      <img :src=\"imgPath + data.images[0]\">\n    </div>\n    <div class=\"daily-title\" :class=\"{ noImg: !data.images}\">{{ data.title }}</div>\n  </a>\n</template>\n<script>\nimport $ from '../libs/util'\nexport default {\n  props: {\n    data: {\n      type: Object\n    }\n  },\n  data () {\n    return {\n      imgPath: $.imgPath\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/item.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"daily-item\"},[(_vm.data.images)?_c('div',{staticClass:\"daily-img\"},[_c('img',{attrs:{\"src\":_vm.imgPath + _vm.data.images[0]}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"daily-title\",class:{ noImg: !_vm.data.images}},[_vm._v(_vm._s(_vm.data.title))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9f4c9b42\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/item.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./item.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./item.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9f4c9b42\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./item.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/item.vue\n// module id = null\n// module chunks = ","var Time = {\n  // 获取当前时间戳\n  getUnix: function () {\n    var date = new Date()\n    return date.getTime()\n  },\n  // 获取今天0点0分0秒的时间戳\n  getTodayUnix: function () {\n    var date = new Date()\n    date.setHours(0)\n    date.setMinutes(0)\n    date.setSeconds(0)\n    date.setMilliseconds(0)\n    return date.getTime()\n  },\n  // 获取今年1月1日0点0分0秒的时间戳\n  getYearUnix: function () {\n    var date = new Date()\n    date.setMonth(0)\n    date.setDate(1)\n    date.setHours(0)\n    date.setMinutes(0)\n    date.setSeconds(0)\n    date.setMilliseconds(0)\n    return date.getTime()\n  },\n  // 获取标准年月日\n  getLastDate: function (time) {\n    var date = new Date(time)\n    var month = date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1\n    var day = date.getDate() < 10 ? '0' + date.getDate() : date.getDate()\n    return date.getFullYear() + '-' + month + '-' + day\n  },\n  // 转换时间\n  getFormatTime: function (timestamp) {\n    var now = this.getUnix()  // 当前时间戳\n    var today = this.getTodayUnix()  // 今天0点时间戳\n    var timer = (now - timestamp) / 1000  // 转换为秒级时间戳\n    var tip = ''\n\n    if (timer <= 0) {\n      tip = '刚刚'\n    } else if (Math.floor(timer / 60) <= 0) {\n      tip = '刚刚'\n    } else if (timer < 3600) {\n      tip = Math.floor(timer / 60) + '分钟前'\n    } else if (timer >= 3600 && (timestamp - today >= 0)) {\n      tip = Math.floor(timer / 3600) + '小时前'\n    } else if (timer / 86400 <= 31) {\n      tip = Math.ceil(timer / 86400) + '天前'\n    } else {\n      tip = this.getLastDate(timestamp)\n    }\n    return tip\n  }\n}\n\nexport default {\n  bind: function (el, binding) {\n    el.innerHTML = Time.getFormatTime(binding.value * 1000)\n    el.__timeout__ = setInterval(function () {\n      el.innerHTML = Time.getFormatTime(binding.value * 1000)\n    }, 60000)\n  },\n  unbind: function (el) {\n    clearInterval(el.__timeout__)\n    delete el.__timeout__\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/directives/time.js","<template>\n    <div class=\"daily-article\">\n        <div class=\"daily-article-title\">{{ data.title }}</div>\n        <div class=\"daily-article-content\" v-html=\"data.body\"></div>\n        <div class=\"daily-comments\" v-show=\"comments.length\">\n            <span>评论（{{ comments.length }}）</span>\n            <div class=\"daily-comment\" v-for=\"comment in comments\">\n                <div class=\"daily-comment-avatar\">\n                    <img :src=\"comment.avatar\">\n                </div>\n                <div class=\"daily-comment-content\">\n                    <div class=\"daily-comment-name\">{{ comment.author }}</div>\n                    <div class=\"daily-comment-time\" v-time=\"comment.time\"></div>\n                    <div class=\"daily-comment-text\">{{ comment.content }}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import Time from '../directives/time'\n    import $ from '../libs/util'\n    export default {\n      directives: { Time },\n      props: {\n        id: {\n          type: Number,\n          default: 0\n        }\n      },\n      data () {\n        return {\n          data: {},\n          comments: []\n        }\n      },\n      methods: {\n        getArticle () {\n          $.ajax.get('news/' + this.id).then(res => {\n            res.body = res.body.replace(/src=\"http/g, 'src=\"' + $.imgPath + 'http')\n            res.body = res.body.replace(/src=\"https/g, 'src=\"' + $.imgPath + 'https')\n            this.data = res\n            window.scrollTo(0, 0)\n            this.getComments()\n          })\n        },\n        getComments () {\n          this.comments = []\n          $.ajax.get('story/' + this.id + '/short-comments').then(res => {\n            this.comments = res.comments.map(comment => {\n              // 将头像的图片地址转为代理地址\n              comment.avatar = $.imgPath + comment.avatar\n              return comment\n            })\n          })\n        }\n      },\n      watch: {\n        id (val) {\n          if (val) this.getArticle()\n        }\n      }\n    }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/daily-article.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"daily-article\"},[_c('div',{staticClass:\"daily-article-title\"},[_vm._v(_vm._s(_vm.data.title))]),_vm._v(\" \"),_c('div',{staticClass:\"daily-article-content\",domProps:{\"innerHTML\":_vm._s(_vm.data.body)}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.comments.length),expression:\"comments.length\"}],staticClass:\"daily-comments\"},[_c('span',[_vm._v(\"评论（\"+_vm._s(_vm.comments.length)+\"）\")]),_vm._v(\" \"),_vm._l((_vm.comments),function(comment){return _c('div',{staticClass:\"daily-comment\"},[_c('div',{staticClass:\"daily-comment-avatar\"},[_c('img',{attrs:{\"src\":comment.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"daily-comment-content\"},[_c('div',{staticClass:\"daily-comment-name\"},[_vm._v(_vm._s(comment.author))]),_vm._v(\" \"),_c('div',{directives:[{name:\"time\",rawName:\"v-time\",value:(comment.time),expression:\"comment.time\"}],staticClass:\"daily-comment-time\"}),_vm._v(\" \"),_c('div',{staticClass:\"daily-comment-text\"},[_vm._v(_vm._s(comment.content))])])])})],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4fd2ef2a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/daily-article.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"daily\">\n    <div class=\"daily-menu\">\n      <div class=\"daily-menu-item\" @click=\"handleToRecommend\" :class=\"{ on: type === 'recommend' }\">每日推荐</div>\n      <div class=\"daily-menu-item\" @click=\"showThemes = !showThemes\" :class=\"{ on: type === 'daily' }\">主题日报</div>\n      <ul v-show=\"showThemes\">\n        <li v-for=\"item in themes\">\n          <a :class=\"{ on: item.id === themeId && type === 'daily' }\" @click=\"handleToTheme(item.id)\">{{ item.name }}</a> \n        </li>\n      </ul>\n    </div>\n    <div class=\"daily-list\" ref=\"list\">\n      <template v-if=\"type === 'recommend'\">\n        <div v-for=\"list in recommendList\">\n          <div class=\"daily-date\">{{ formatDay(list.date)}}</div>\n          <Item v-for=\"item in list.stories\" :data=\"item\" :key=\"item.id\" @click.native=\"handleClick(item.id)\"></Item>\n        </div>\n      </template>\n      <template v-if=\"type === 'daily'\">\n        <Item v-for=\"item in list\" :data=\"item\" :key=\"item.id\" @click.native=\"handleClick(item.id)\"></Item>\n      </template>\n    </div>\n    <daily-article :id=\"articleId\"></daily-article>\n  </div> \n</template>\n<script>\nimport Item from './components/item'\nimport dailyArticle from './components/daily-article'\nimport $ from './libs/util'\nexport default {\n  components: {\n    Item,\n    dailyArticle\n  },\n  data () {\n    return {\n      themes: [],\n      showThemes: false,\n      type: 'recommend',\n      recommendList: [],\n      dailyTime: $.getTodayTime(),\n      isLoading: false,\n      list: [],\n      themeId: 0,\n      articleId: 0\n    }\n  },\n  methods: {\n    handleClick (id) {\n      this.articleId = id\n    },\n    formatDay (date) {\n      let month = date.substr(4, 2)\n      let day = date.substr(6, 2)\n      if (month.substr(0, 1) === '0') month = month.substr(1, 1)\n      if (day.substr(0, 1) === '0') day = day.substr(1, 1)\n      return `${month} 月 ${day} 日`\n    },\n    handleToRecommend () {\n      this.type = 'recommend'\n      this.recommendList = []\n      this.dailyTime = $.getTodayTime()\n      this.getRecommendList()\n    },\n    getRecommendList () {\n      this.isLoading = true\n      const prevDay = $.prevDay(this.dailyTime + 86400000)\n      $.ajax.get('news/before/' + prevDay).then(res => {\n        this.recommendList.push(res)\n        this.isLoading = false\n      })\n    },\n    handleToTheme (id) {\n      this.type = 'daily'\n      this.themeId = id\n      this.list = []\n      $.ajax.get('theme/' + id).then(res => {\n        this.list = res.stories.filter(item => item.type !== 1)\n      })\n    },\n    getThemes () {\n      $.ajax.get('themes').then(res => {\n        this.themes = res.others\n      })\n    }\n  },\n  mounted () {\n    this.getThemes()\n    this.getRecommendList()\n\n    const $list = this.$refs.list\n    $list.addEventListener('scroll', () => {\n      if (this.type === 'daily' || this.isLoading) return\n      if ($list.scrollTop + document.body.clientHeight >= $list.scrollHeight) {\n        this.dailyTime -= 86400000\n        this.getRecommendList()\n      }\n    })\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./daily-article.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./daily-article.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4fd2ef2a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./daily-article.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/daily-article.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"daily\"},[_c('div',{staticClass:\"daily-menu\"},[_c('div',{staticClass:\"daily-menu-item\",class:{ on: _vm.type === 'recommend' },on:{\"click\":_vm.handleToRecommend}},[_vm._v(\"每日推荐\")]),_vm._v(\" \"),_c('div',{staticClass:\"daily-menu-item\",class:{ on: _vm.type === 'daily' },on:{\"click\":function($event){_vm.showThemes = !_vm.showThemes}}},[_vm._v(\"主题日报\")]),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showThemes),expression:\"showThemes\"}]},_vm._l((_vm.themes),function(item){return _c('li',[_c('a',{class:{ on: item.id === _vm.themeId && _vm.type === 'daily' },on:{\"click\":function($event){_vm.handleToTheme(item.id)}}},[_vm._v(_vm._s(item.name))])])}))]),_vm._v(\" \"),_c('div',{ref:\"list\",staticClass:\"daily-list\"},[(_vm.type === 'recommend')?_vm._l((_vm.recommendList),function(list){return _c('div',[_c('div',{staticClass:\"daily-date\"},[_vm._v(_vm._s(_vm.formatDay(list.date)))]),_vm._v(\" \"),_vm._l((list.stories),function(item){return _c('Item',{key:item.id,attrs:{\"data\":item},nativeOn:{\"click\":function($event){_vm.handleClick(item.id)}}})})],2)}):_vm._e(),_vm._v(\" \"),(_vm.type === 'daily')?_vm._l((_vm.list),function(item){return _c('Item',{key:item.id,attrs:{\"data\":item},nativeOn:{\"click\":function($event){_vm.handleClick(item.id)}}})}):_vm._e()],2),_vm._v(\" \"),_c('daily-article',{attrs:{\"id\":_vm.articleId}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3be487d4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3be487d4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport './style.css'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}